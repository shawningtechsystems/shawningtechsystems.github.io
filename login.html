<html>
 <head>
    <title>shawning tech systems</title>
    <script src="https://js.hcaptcha.com/1/api.js" async defer></script>
 </head>
<body>
    <script src="https://accounts.google.com/gsi/client" async></script>
    <div id="g_id_onload"
        data-client_id="925303653091-o0skfo8n4j9d4fasd95ovveooo7r0jao.apps.googleusercontent.com"
        data-login_uri="error.html"
        data-auto_prompt="false">
    </div>

<h1>login to shawning tech systems</h1>

<form action="/action_page.php">
  <label for="email">email</label>
  <input type="email" id="email" name="email"><br><br>
  <label for="pwd">password</label>
  <input type="password" id="pwd" name="pwd" minlength="8"><br><br>
  <a href="./forgorpassword.html">i forgor password</a>
  <p>please make sure to wait for the recaptcha</p>
  <div class="h-captcha" data-sitekey="cfbc2300-5e9e-45e4-a32c-3f367618b936"></div>
  <div class="g_id_signin"
        data-type="standard"
        data-size="large"
        data-theme="outline"
        data-text="sign_in_with"
        data-shape="rectangular"
        data-logo_alignment="left">
   </div>
   <button id="login-button">Log in with Spotify</button>
</form>

<a href="./error.html">log in</a>
<a href="./index.html">go back</a>

 <script>
      document.getElementById('login-button').addEventListener('click', function() {
        var client_id = '927dfa2ebcf24ae6b575fbe806fff830'; // Replace with your Client ID
        var redirect_uri = 'error.html'; // Replace with your Redirect URI
        var scope = 'user-read-private user-read-email'; // Define required scopes
        var state = generateRandomString(16); // Generate a random string for state

        localStorage.setItem('spotify_auth_state', state);

        var auth_url = 'https://accounts.spotify.com/authorize?' +
          'response_type=code' +
          '&client_id=' + encodeURIComponent(client_id) +
          '&scope=' + encodeURIComponent(scope) +
          '&redirect_uri=' + encodeURIComponent(redirect_uri) +
          '&state=' + encodeURIComponent(state);

        window.location = auth_url;
      });

      function generateRandomString(length) {
        var text = '';
        var possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
        for (var i = 0; i < length; i++) {
          text += possible.charAt(Math.floor(Math.random() * possible.length));
        }
        return text;
      }
    </script>
 
</html>
